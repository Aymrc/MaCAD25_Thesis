<!-- UI front-end for copilot -->

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>Graph Copilot</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="styles.css" />

  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.6/dist/purify.min.js"></script>
  <script src="https://unpkg.com/cytoscape@3.28.1/dist/cytoscape.min.js"></script>

  <script src="https://unpkg.com/three@0.150.1/build/three.min.js"></script>
  <script src="https://unpkg.com/3d-force-graph"></script>

</head>


<body>
  <div id="graph3d-container" aria-label="3D Graph">
    <div id="graph3d"></div>
  </div>


  <div id="chat-history-container">
    <div id="chat-history" aria-live="polite" aria-atomic="false"></div>
  </div>


  <div class="chat-footer" role="complementary" aria-label="Chat controls">
    <div class="chat-footer-inner">
      <!-- LEFT pills -->
      <div class="pill-group pill-group-left">
        <div class="pill context-pill" id="contextPill" tabindex="0" aria-haspopup="true" aria-expanded="false">
          <span>Context</span>
          <div class="dropdown context-form" id="contextForm" role="dialog" aria-label="Set geospatial context">
            <label>Lat: <input type="number" step="any" id="latInput" /></label>
            <label>Long: <input type="number" step="any" id="longInput" /></label>
            <label>Radius (km): <input type="number" step="any" id="radiusInput" /></label>
            <button id="saveContextBtn" type="button">Set</button>
          </div>
        </div>

        <div class="pill upload-pill empty" role="button" tabindex="0" aria-controls="brief-upload" aria-label="Upload brief (PDF)">
          <span id="uploadLabel">Brief</span>
          <input type="file" id="brief-upload" accept=".pdf" />
        </div>
      </div>

      <!-- CENTER input -->
      <div class="chat-bar">
        <div class="input-wrapper">
          <input type="text" id="chatInput" placeholder="Ask anything..." aria-label="Chat message" />
          <button id="sendBtn" type="button" aria-label="Send message">Send</button>
        </div>
      </div>

      <!-- RIGHT pill -->
      <div class="pill-group pill-group-right">
        <div class="pill param-pill" id="paramPill" tabindex="0" aria-haspopup="true" aria-expanded="false">
          <span>Parameters</span>
          <div class="dropdown param-form" id="paramForm" role="dialog" aria-label="Display parameters">
            <label><input type="checkbox" id="toggleContext" /> View Context</label>
            <label><input type="checkbox" id="toggleNodeId" /> Node ID</label>
            <label><input type="checkbox" id="toggleNodeName" /> Node Name</label>
            <label><input type="checkbox" id="toggleFootprint" /> Node Footprint</label>
            <label><input type="checkbox" id="toggleColors" /> Node Colors</label>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- centralized JS scripts -->
  <script src="chat.js" defer></script>
</body>
</html>
